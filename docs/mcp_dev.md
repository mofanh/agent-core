# MCP (Model C### âœ… ç¬¬äºŒé˜¶æ®µï¼šMCPCl### âœ… ç¬¬ä¸‰é˜¶æ®µï¼šMCPC### âœ… ç¬¬å››é˜¶æ®µï¼šå·¥å…·è°ƒç”¨æ”¯æŒ
- [x] å·¥å…·å‘çŽ°æœºåˆ¶
- [x] å·¥å…·è°ƒç”¨æŽ¥å£
- [x] å‚æ•°éªŒè¯
- [x] ç»“æžœå¤„ç†

## ðŸ“¦ å®ŒæˆçŠ¶æ€

### ðŸŽ¯ æ‰€æœ‰é˜¶æ®µå·²å®Œæˆ
- âœ… ç¬¬ä¸€é˜¶æ®µï¼šç±»åž‹å®šä¹‰ç³»ç»Ÿ
- âœ… ç¬¬äºŒé˜¶æ®µï¼šMCPClient å®žçŽ°
- âœ… ç¬¬ä¸‰é˜¶æ®µï¼šMCPConnectionManager
- âœ… ç¬¬å››é˜¶æ®µï¼šå·¥å…·è°ƒç”¨æ”¯æŒtionManager
- [x] è¿žæŽ¥æ± ç®¡ç†
- [x] å¤šæœåŠ¡å™¨æ”¯æŒ
- [x] è¿žæŽ¥çŠ¶æ€ç›‘æŽ§
- [x] è‡ªåŠ¨é‡è¿žæœºåˆ¶

### ðŸ”„ ç¬¬å››é˜¶æ®µï¼šå·¥å…·è°ƒç”¨æ”¯æŒ
- [ ] å·¥å…·å‘çŽ°æœºåˆ¶
- [ ] å·¥å…·è°ƒç”¨æŽ¥å£
- [ ] å‚æ•°éªŒè¯
- [ ] ç»“æžœå¤„ç†x] åŸºç¡€å®¢æˆ·ç«¯è¿žæŽ¥
- [x] JSON-RPC åè®®æ”¯æŒ
- [x] stdio/http ä¼ è¾“å±‚
- [x] é”™è¯¯å¤„ç†æœºåˆ¶

### ðŸ”„ ç¬¬ä¸‰é˜¶æ®µï¼šMCPConnectionManager
- [ ] è¿žæŽ¥æ± ç®¡ç†
- [ ] å¤šæœåŠ¡å™¨æ”¯æŒ
- [ ] è¿žæŽ¥çŠ¶æ€ç›‘æŽ§
- [ ] è‡ªåŠ¨é‡è¿žæœºåˆ¶ocol) å¼€å‘æ–‡æ¡£

# MCP (Model Context Protocol) é›†æˆå®Œæˆ

## æ¦‚è¿°

åŸºäºŽå¯¹codex-rsä¸­MCPå®žçŽ°çš„åˆ†æžï¼Œæˆ‘ä»¬å·²ç»åœ¨agent-coreä¸­å®žçŽ°äº†å®Œæ•´çš„MCPåè®®æ”¯æŒï¼Œä½¿å…¶èƒ½å¤ŸçœŸæ­£è°ƒç”¨å¤–éƒ¨æœåŠ¡è€Œä¸æ˜¯ä»…ä»…æ¨¡æ‹Ÿå“åº”ã€‚

## âœ… å®ŒæˆçŠ¶æ€

**æ‰€æœ‰è®¡åˆ’çš„åŠŸèƒ½å·²ç»å®Œæˆï¼** MCPæ¨¡å—çŽ°å·²å®Œå…¨é›†æˆåˆ°agent-coreçš„ä¸»å·¥ä½œæµä¸­ã€‚

## å½“å‰çŠ¶æ€

**æ—¥æœŸ**: 2025å¹´8æœˆ25æ—¥
**çŠ¶æ€**: âœ… å®Œæˆ - æ‰€æœ‰é˜¶æ®µå·²å®Œæˆ
**å½“å‰é˜¶æ®µ**: é¡¹ç›®å®Œæˆï¼Œå¯æŠ•å…¥ä½¿ç”¨

---

## å¼€å‘æ—¥å¿—

### 2025å¹´8æœˆ25æ—¥ - é¡¹ç›®å¯åŠ¨
- åˆ›å»ºMCPå¼€å‘æ–‡æ¡£
- åˆ†æžcodex-rsçš„MCPå®žçŽ°
- åˆ¶å®šå¼€å‘è®¡åˆ’

### 2025å¹´8æœˆ25æ—¥ - å®Œæˆç¬¬å››é˜¶æ®µåŠæ•´ä¸ªé¡¹ç›®
- âœ… å®žçŽ°å®Œæ•´çš„MCPToolSystemç±» (`src/mcp/tool-system.js`)
- æä¾›é«˜çº§å·¥å…·è°ƒç”¨åŠŸèƒ½
- å®žçŽ°å‚æ•°éªŒè¯å’ŒJSON Schemaæ”¯æŒ
- æä¾›ç»“æžœå¤„ç†å’Œè‡ªå®šä¹‰å¤„ç†å™¨
- æ”¯æŒå·¥å…·é“¾æ‰§è¡Œ
- åŒ…å«æ€§èƒ½ç›‘æŽ§å’Œæ‰§è¡ŒåŽ†å²
- âœ… å®ŒæˆMCPæ¨¡å—ä¸»å…¥å£ (`src/mcp/index.js`)
- æä¾›ä¾¿æ·çš„å·¥åŽ‚å‡½æ•°å’Œé¢„è®¾é…ç½®
- åŒ…å«å·¥å…·é“¾æ¨¡æ¿
- æ”¯æŒä¸€é”®åˆ›å»ºå®Œæ•´MCPç³»ç»Ÿ

## ðŸ† é¡¹ç›®æˆæžœæ€»ç»“

### ðŸ“ æ–‡ä»¶ç»“æž„
```
src/mcp/
â”œâ”€â”€ types.js              # MCPåè®®ç±»åž‹å®šä¹‰
â”œâ”€â”€ client.js             # MCPå®¢æˆ·ç«¯å®žçŽ°
â”œâ”€â”€ connection-manager.js  # è¿žæŽ¥ç®¡ç†å™¨
â”œâ”€â”€ tool-system.js        # å·¥å…·è°ƒç”¨ç³»ç»Ÿ
â””â”€â”€ index.js              # æ¨¡å—ä¸»å…¥å£
```

### ðŸ”‘ æ ¸å¿ƒç‰¹æ€§
1. **å®Œæ•´çš„MCPåè®®æ”¯æŒ** - åŸºäºŽcodex-rså®žçŽ°
2. **å¤šä¼ è¾“å±‚æ”¯æŒ** - stdioå’ŒHTTPä¼ è¾“
3. **è¿žæŽ¥æ± ç®¡ç†** - æ”¯æŒå¤šæœåŠ¡å™¨å’Œè´Ÿè½½å‡è¡¡
4. **æ™ºèƒ½å·¥å…·è°ƒç”¨** - å‚æ•°éªŒè¯ã€ç»“æžœå¤„ç†ã€å·¥å…·é“¾
5. **ç”Ÿäº§çº§ç‰¹æ€§** - å¥åº·æ£€æŸ¥ã€è‡ªåŠ¨é‡è¿žã€æ€§èƒ½ç›‘æŽ§

### ðŸ“Š æŠ€æœ¯æŒ‡æ ‡
- **ç±»åž‹å®‰å…¨**: å®Œæ•´çš„JSDocç±»åž‹å®šä¹‰
- **é”™è¯¯å¤„ç†**: ç»“æž„åŒ–é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- **æ€§èƒ½ä¼˜åŒ–**: è¿žæŽ¥æ± ã€è¯·æ±‚ç¼“å­˜ã€è´Ÿè½½å‡è¡¡
- **å¯æ‰©å±•æ€§**: æ’ä»¶åŒ–æž¶æž„ï¼Œæ˜“äºŽæ‰©å±•æ–°åŠŸèƒ½
- **å¯è§‚æµ‹æ€§**: è¯¦ç»†æ—¥å¿—ã€æŒ‡æ ‡æ”¶é›†ã€æ‰§è¡ŒåŽ†å²

### ðŸš€ ä½¿ç”¨ç¤ºä¾‹
```javascript
import { createMCPSystem } from './mcp/index.js';

const mcp = await createMCPSystem({
  servers: [
    { name: 'web', transport: 'stdio', command: 'web-mcp-server' },
    { name: 'file', transport: 'stdio', command: 'file-mcp-server' }
  ]
});

// è°ƒç”¨å·¥å…·
const result = await mcp.callTool('fetch_page', { url: 'https://example.com' });

// æ‰§è¡Œå·¥å…·é“¾
const chainResult = await mcp.executeToolChain([
  { tool: 'fetch_page', args: { url: 'https://example.com' } },
  { tool: 'extract_text', dataMapping: (data, results) => ({ html: results[0]?.data?.html }) }
]);
```
